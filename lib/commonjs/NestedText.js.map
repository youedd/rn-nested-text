{"version":3,"sources":["NestedText.tsx"],"names":["DEFAULT_TEXT_PROPS","i","style","fontStyle","u","textDecorationLine","b","fontWeight","NestedText","children","textProps","props","parsed","React","useMemo","Parser","parse","renderNestedText","nestedText","map","text","index","defaultTextProps","tag"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;AAYA,MAAMA,kBAA6C,GAAG;AACpDC,EAAAA,CAAC,EAAE;AACDC,IAAAA,KAAK,EAAE;AACLC,MAAAA,SAAS,EAAE;AADN;AADN,GADiD;AAMpDC,EAAAA,CAAC,EAAE;AACDF,IAAAA,KAAK,EAAE;AACLG,MAAAA,kBAAkB,EAAE;AADf;AADN,GANiD;AAWpDC,EAAAA,CAAC,EAAE;AACDJ,IAAAA,KAAK,EAAE;AACLK,MAAAA,UAAU,EAAE;AADP;AADN;AAXiD,CAAtD;;AAkBA,MAAMC,UAA+B,GAAG,QAAuC;AAAA,MAAtC;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,SAAZ;AAAuB,OAAGC;AAA1B,GAAsC;;AAC7E,QAAMC,MAAM,GAAGC,eAAMC,OAAN,CAAc,MAAM;AACjC,WAAOC,eAAOC,KAAP,CAAaP,QAAb,CAAP;AACD,GAFc,EAEZ,CAACA,QAAD,CAFY,CAAf;;AAIA,sBAAO,6BAAC,iBAAD,EAAUE,KAAV,EAAkBM,gBAAgB,CAACL,MAAD,EAASF,SAAT,CAAlC,CAAP;AACD,CAND;;AAQA,MAAMO,gBAAgB,GAAG,UACvBC,UADuB,EAGS;AAAA,MADhCR,SACgC,uEADR,EACQ;AAChC,SAAOQ,UAAU,CAACC,GAAX,CAAe,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACrC,QAAI,OAAOD,IAAP,KAAgB,QAApB,EAA8B;AAC5B,aAAOA,IAAP;AACD;;AAED,UAAMT,KAAK,GAAG,EACZ,GAAGH,UAAU,CAACc,gBAAX,CAA4BF,IAAI,CAACG,GAAjC,CADS;AAEZ,SAAGb,SAAS,CAACU,IAAI,CAACG,GAAN;AAFA,KAAd;AAKA,wBACE,6BAAC,iBAAD;AAAM,MAAA,GAAG,EAAEF;AAAX,OAAsBV,KAAtB,GACGM,gBAAgB,CAACG,IAAI,CAACX,QAAN,EAAgBC,SAAhB,CADnB,CADF;AAKD,GAfM,CAAP;AAgBD,CApBD;;AAsBAF,UAAU,CAACc,gBAAX,GAA8BtB,kBAA9B;eACeQ,U","sourcesContent":["import React from 'react'\nimport { Text, TextProps } from 'react-native'\nimport { Parser, TextGroup } from './parser'\n\ntype TextsProps = Record<string, TextProps> | undefined\nexport interface NestedTextProps extends TextProps {\n  children: string\n  textProps?: TextsProps\n}\n\ntype NestedTextComponent = React.FC<NestedTextProps> & {\n  defaultTextProps: Record<string, TextProps>\n}\n\nconst DEFAULT_TEXT_PROPS: Record<string, TextProps> = {\n  i: {\n    style: {\n      fontStyle: 'italic'\n    }\n  },\n  u: {\n    style: {\n      textDecorationLine: 'underline'\n    }\n  },\n  b: {\n    style: {\n      fontWeight: 'bold'\n    }\n  }\n}\n\nconst NestedText: NestedTextComponent = ({ children, textProps, ...props }) => {\n  const parsed = React.useMemo(() => {\n    return Parser.parse(children)\n  }, [children])\n\n  return <Text {...props}>{renderNestedText(parsed, textProps)}</Text>\n}\n\nconst renderNestedText = (\n  nestedText: Array<string | TextGroup>,\n  textProps: TextsProps = {}\n): Array<string | JSX.Element> => {\n  return nestedText.map((text, index) => {\n    if (typeof text === 'string') {\n      return text\n    }\n\n    const props = {\n      ...NestedText.defaultTextProps[text.tag],\n      ...textProps[text.tag]\n    }\n\n    return (\n      <Text key={index} {...props}>\n        {renderNestedText(text.children, textProps)}\n      </Text>\n    )\n  })\n}\n\nNestedText.defaultTextProps = DEFAULT_TEXT_PROPS\nexport default NestedText\n"]}